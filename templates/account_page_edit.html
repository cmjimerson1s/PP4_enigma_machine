{% extends "base.html" %}
{% block content %}
<form method="POST" action="{% url 'account_update_post' %}">
    {% csrf_token %}
    <h1>Edit Account Information</h1>
    <input type="text" name="new_username" value="{{ username }}">
    <input type="text" name="new_first_name" value="{{ first_name }}">
    <input type="text" name="new_last_name" value="{{ last_name }}">
    <input type="text" name="new_email" value="{{ email }}">
    <input type="hidden" name="user_id" value="{{user_id}}">
    <button type="submit">Update Now</button>
</form>
<form id="deleteAccountForm" method="post" action="{% url 'delete_account' %}">
    {% csrf_token %}
    <button id="deleteButton" type="button">Request Account Deletion</button>
    <input type="hidden" name="user_id" value="{{ user_id }}">
  </form>
  
  <div id="myModal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h2>Confirm Account Deletion</h2>
      <p>Are you sure you want to delete your account?</p>
      <button id="confirmButton">Confirm</button>
      <button id="cancelButton">Cancel</button>
    </div>
  </div>
  
  <script>
    // Get the form element
    var form = document.getElementById('deleteAccountForm');
  
    // Get the delete button element
    var deleteButton = document.getElementById('deleteButton');
  
    // Get the modal element
    var modal = document.getElementById('myModal');
  
    // Get the close button element
    var closeButton = document.getElementsByClassName('close')[0];
  
    // Get the confirm and cancel buttons
    var confirmButton = document.getElementById('confirmButton');
    var cancelButton = document.getElementById('cancelButton');
  
    // When the delete button is clicked, display the modal
    deleteButton.addEventListener('click', function() {
      modal.style.display = 'block';
    });
  
    // When the close button is clicked or outside the modal, close the modal
    closeButton.addEventListener('click', function() {
      modal.style.display = 'none';
    });
  
    window.addEventListener('click', function(event) {
      if (event.target == modal) {
        modal.style.display = 'none';
      }
    });
  
    // When the confirm button is clicked, submit the form
    confirmButton.addEventListener('click', function() {
      form.submit();
    });
  
    // When the cancel button is clicked, close the modal
    cancelButton.addEventListener('click', function() {
      modal.style.display = 'none';
    });
  </script>

{% endblock %}